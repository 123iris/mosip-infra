component: kernel
part-of: mosip
activeProfileEnv: mz
springConfigLabel: {{ config_repo.version }} 
configServerUrl: {{ config_server.internal_url }}
artifactoryUrl: {{ artifactory_url }} 
iamAdapterUrl: {{ iam_adapter_url }}
runtimeDepUrl: {{ runtimeDepUrlpath }}
cont_user: {{ container_user }}
exportLogs: enabled  # Let filebeat export the logs
probe:
  initialDelay: 120  # Seconds
  period: 30 # Seconds
imagePullPolicy: Always
isGlowroot: {{ is_glowroot }} 

dockerHub:
  private: {{ docker.hub.private }}  
  keyname: {{ docker.hub.keyname }}

services:
  key-migrator:
    serviceName: {{ versions.services.kernel.key.keys()[0] }} 
    dockerImage: {{ versions.services.kernel.key.values()[0] }}
    containerPort: 9096
    servicePort: 80
    #hsmUrl: tcp://softhsm-keymanager:80
    ingressPath: /v1/keymigrator
    healthUrl: /v1/keymigrator/actuator/health
    hsmClientZipPath: {{ hsm_client_zip_path }}
    podconfig:
      {{ podconfig.kernel.keyMigrator | to_nice_yaml(indent=6) | indent(6) }}
